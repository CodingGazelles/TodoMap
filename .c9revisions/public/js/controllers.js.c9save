{"ts":1355607159747,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"'use strict';\n\n/* Controllers */\n\nfunction TreeCtrl($scope, Tree) {\n     console.log(\"call function TreeCtrl\");\n\n     Tree.get( {}, \n          function(data){          // SUCCESS\n               console.log(\"call api Tree.get succeed\");\n               calChildrenWeight( data);\n               calRelativeWeight( data);\n               colorize( data);\n               $scope.tree = data;\n               // console.log(\"$scope.tree: \" + JSON.stringify( $scope.tree));\n          }, \n          function(data){          // FAILURE\n               console.log(\"call api Tree.get failed\");\n               console.log(\"data: \" + data);\n               $scope.tree = {\n                    label: \"error\",\n                    childNodes: []\n               };\n               console.log(\"$scope.tree: \" + JSON.stringify( $scope.tree));\n          }\n     );\n}\n\nfunction colorize( tree, hsvColor, hueVar){\n     if( hueVar === undefined) hueVar = 360;\n     if( hsvColor === undefined) hsvColor = {h: 0, s: 0.7, v: 1}; \n     hueVar = Math.min( hueVar, 360);\n\n     var nColor = tree.childNodes.length;\n     var color = {h: (360 + hsvColor.h - hueVar*3/8)%360, s: hsvColor.s, v: hsvColor.v};\n     for( var i = 0; i < nColor; i++){\n          color = {h: (color.h + hueVar/nColor*i)%360, s: color.s, v: color.v};\n          tree.childNodes[i].bgcolor = tinycolor(\"hsv (\" + color.h + \" \" + color.s + \" \" + color.v + \")\").toHexString();\n          colorize( tree.childNodes[i], {h: color.h, s: color.s * 0.65, v: color.v}, hueVar/nColor);\n     }\n}\n\nfunction calChildrenWeight( tree){\n     if( tree.weight === undefined) tree.weight = 0;\n     if( tree.childrenWeight === undefined) tree.childrenWeight = 0;\n     for( var i =0; i < tree.childNodes.length; i++){\n          calChildrenWeight( tree.childNodes[i]);\n          tree.childrenWeight += tree.childNodes[i].weight + tree.childNodes[i].childrenWeight;\n     }\n}\n\nfunction calRelativeWeight( tree, totLevelWeight){\n     if( totLevelWeight === undefined) {\n          totLevelWeight = tree.weight + tree.childrenWeight;\n     }\n     tree.relatWeight = ((tree.weight + tree.childrenWeight) / totLevelWeight * 100).toFixed(1) + \"%\";\n     for( var i = 0; i < tree.childNodes.length; i++){\n          calRelativeWeight( tree.childNodes[i], tree.childrenWeight);\n     }\n\n}\n\n"]],"start1":0,"start2":0,"length1":0,"length2":2289}]],"length":2289}
{"contributors":[],"silentsave":false,"ts":1355614347337,"patch":[[{"diffs":[[0,"*/\n\n"],[-1,"function TreeCtrl"],[1,"angular.module( 'todoApp.controllers', ['todoApp.services']).\ncontroller('Tree', function"],[0,"($scope"],[-1,", Tree"],[0,") {\n"],[-1," "],[0,"    "]],"start1":30,"start2":30,"length1":43,"length2":108},{"diffs":[[0,"Tree"],[-1,"Ctrl"],[0,"\");\n"],[-1,"\n "],[0,"    "]],"start1":165,"start2":165,"length1":18,"length2":12},{"diffs":[[0,"get("],[-1," "],[0,"{},"],[-1," \n      "],[1,"\n\n"],[0,"    "]],"start1":182,"start2":182,"length1":20,"length2":13},{"diffs":[[0,"nction(data)"],[-1,"{        "],[0," "],[1,"{"],[0," // SUCCESS\n"]],"start1":197,"start2":197,"length1":34,"length2":26},{"diffs":[[0,"SUCCESS\n        "],[-1,"     "],[-1,"  "],[0,"console.log(\"cal"]],"start1":215,"start2":215,"length1":39,"length2":32},{"diffs":[[0,"        "],[-1,"       "],[0,"calChild"]],"start1":273,"start2":273,"length1":23,"length2":16},{"diffs":[[0,"ldrenWeight("],[-1," "],[0,"data);\n     "]],"start1":287,"start2":287,"length1":25,"length2":24},{"diffs":[[0,"        "],[-1,"     "],[-1,"  "],[0,"calRelat"]],"start1":306,"start2":306,"length1":23,"length2":16},{"diffs":[[0,"eWeight("],[-1," "],[0,"data);\n "]],"start1":324,"start2":324,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"     "],[-1,"  "],[0,"colorize"]],"start1":339,"start2":339,"length1":23,"length2":16},{"diffs":[[0,"olorize("],[-1," "],[0,"data);\n "]],"start1":348,"start2":348,"length1":17,"length2":16},{"diffs":[[0,"(data);\n        "],[-1,"    "],[-1,"   "],[0,"$scope.tree = da"]],"start1":355,"start2":355,"length1":39,"length2":32},{"diffs":[[0,"= data;\n"],[-1,"       "],[0,"        "]],"start1":383,"start2":383,"length1":23,"length2":16},{"diffs":[[0,"    "],[-1,"      }, \n      "],[1,"},\n\n"],[0,"    "]],"start1":463,"start2":463,"length1":24,"length2":12},{"diffs":[[0,"ata)"],[-1,"{        "],[0," "],[1,"{"],[0," // "]],"start1":485,"start2":485,"length1":18,"length2":10},{"diffs":[[0,"FAILURE\n"],[-1,"       "],[0,"        "]],"start1":495,"start2":495,"length1":23,"length2":16},{"diffs":[[0,"iled\");\n        "],[-1,"    "],[-1,"   "],[0,"console.log(\"dat"]],"start1":544,"start2":544,"length1":39,"length2":32},{"diffs":[[0,"        "],[-1,"       "],[0,"$scope.t"]],"start1":590,"start2":590,"length1":23,"length2":16},{"diffs":[[0,"        "],[-1,"     "],[-1,"   "],[0,"label: \""]],"start1":618,"start2":618,"length1":24,"length2":16},{"diffs":[[0,"        "],[-1,"     "],[-1,"   "],[0,"childNod"]],"start1":646,"start2":646,"length1":24,"length2":16},{"diffs":[[0,"    "],[-1,"    "],[-1,"   };\n       "],[1,"};\n"],[0,"    "]],"start1":673,"start2":673,"length1":25,"length2":11},{"diffs":[[0," JSON.stringify("],[-1," "],[0,"$scope.tree));\n "]],"start1":717,"start2":717,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1,"      }\n     "],[1,"}"],[0,");\n}"],[1,");"],[0,"\n\nfu"]],"start1":748,"start2":748,"length1":25,"length2":15},{"diffs":[[0,"on colorize("],[-1," "],[0,"tree, hsvCol"]],"start1":767,"start2":767,"length1":25,"length2":24},{"diffs":[[0," hueVar)"],[1," "],[0,"{\n    "],[-1," "],[0,"if"],[-1,"("],[0," "],[1,"("],[0,"hueVar ="]],"start1":794,"start2":794,"length1":27,"length2":27},{"diffs":[[0,"60;\n    "],[-1," "],[0,"if"],[-1,"("],[0," "],[1,"("],[0,"hsvColor"]],"start1":845,"start2":845,"length1":21,"length2":20},{"diffs":[[0," = {"],[-1,"h: 0, s: 0.7, v: 1}; \n "],[1,"\n        h: 0,\n        s: 0.7,\n        v: 1\n    };\n"],[0,"    "]],"start1":889,"start2":889,"length1":31,"length2":59},{"diffs":[[0,"ath.min("],[-1," "],[0,"hueVar, "]],"start1":958,"start2":958,"length1":17,"length2":16},{"diffs":[[0,", 360);\n"],[-1,"\n "],[0,"    var "]],"start1":972,"start2":972,"length1":18,"length2":16},{"diffs":[[0,"th;\n    "],[-1," "],[0,"var colo"]],"start1":1017,"start2":1017,"length1":17,"length2":16},{"diffs":[[0,"ar color = {"],[1,"\n        "],[0,"h: (360 + hs"]],"start1":1026,"start2":1026,"length1":24,"length2":33},{"diffs":[[0,"eVar"],[-1,"*3/8)%360,"],[1," * 3 / 8) % 360,\n       "],[0," s: "]],"start1":1072,"start2":1072,"length1":18,"length2":32},{"diffs":[[0," hsvColor.s,"],[1,"\n       "],[0," v: hsvColor"]],"start1":1103,"start2":1103,"length1":24,"length2":32},{"diffs":[[0,"or.v"],[1,"\n    "],[0,"};\n    "],[-1," "],[0,"for"],[-1,"("],[0," "],[1,"("],[0,"var "]],"start1":1133,"start2":1133,"length1":21,"length2":25},{"diffs":[[0,"nColor; i++)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        colo"]],"start1":1169,"start2":1169,"length1":28,"length2":27},{"diffs":[[0,"olor = {"],[1,"\n            "],[0,"h: (colo"]],"start1":1193,"start2":1193,"length1":16,"length2":29},{"diffs":[[0,"eVar"],[-1,"/"],[1," / "],[0,"nColor"],[-1,"*i)%360, s: color.s,"],[1," * i) % 360,\n            s: color.s,\n           "],[0," v: "]],"start1":1230,"start2":1230,"length1":35,"length2":65},{"diffs":[[0," color.v"],[1,"\n        "],[0,"};\n"],[-1,"  "],[0,"        "]],"start1":1294,"start2":1294,"length1":21,"length2":28},{"diffs":[[0,"();\n        "],[-1,"  "],[0,"colorize( tr"]],"start1":1429,"start2":1429,"length1":26,"length2":24},{"diffs":[[0,"olorize("],[-1," "],[0,"tree.chi"]],"start1":1442,"start2":1442,"length1":17,"length2":16},{"diffs":[[0,"], {"],[-1,"h: color.h,"],[1,"\n            h: color.h,\n           "],[0," s: "]],"start1":1467,"start2":1467,"length1":19,"length2":44},{"diffs":[[0," * 0.65,"],[1,"\n           "],[0," v: colo"]],"start1":1518,"start2":1518,"length1":16,"length2":28},{"diffs":[[0," color.v"],[1,"\n        "],[0,"}, hueVa"]],"start1":1541,"start2":1541,"length1":16,"length2":25},{"diffs":[[0,", hueVar"],[-1,"/"],[1," / "],[0,"nColor);"]],"start1":1559,"start2":1559,"length1":17,"length2":19},{"diffs":[[0,"Color);\n"],[-1," "],[0,"    }\n}\n"]],"start1":1571,"start2":1571,"length1":17,"length2":16},{"diffs":[[0,"ght("],[-1," "],[0,"tree)"],[1," "],[0,"{\n"],[-1," "],[0,"    if"],[-1,"("],[0," "],[1,"("],[0,"tree"]],"start1":1611,"start2":1611,"length1":25,"length2":24},{"diffs":[[0," 0;\n    "],[-1," "],[0,"if"],[-1,"("],[0," "],[1,"("],[0,"tree.chi"]],"start1":1671,"start2":1671,"length1":21,"length2":20},{"diffs":[[0," 0;\n    "],[-1," "],[0,"for"],[-1,"("],[0," "],[1,"("],[0,"var i ="],[1," "],[0,"0; i < t"]],"start1":1739,"start2":1739,"length1":29,"length2":29},{"diffs":[[0,"des.length; i++)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        calChild"]],"start1":1779,"start2":1779,"length1":36,"length2":35},{"diffs":[[0,"ldrenWeight("],[-1," "],[0,"tree.childNo"]],"start1":1812,"start2":1812,"length1":25,"length2":24},{"diffs":[[0,"]);\n        "],[-1,"  "],[0,"tree.childre"]],"start1":1841,"start2":1841,"length1":26,"length2":24},{"diffs":[[0,"ht;\n    "],[-1," "],[0,"}\n}\n\nfun"]],"start1":1935,"start2":1935,"length1":17,"length2":16},{"diffs":[[0,"ativeWeight("],[-1," "],[0,"tree, totLev"]],"start1":1963,"start2":1963,"length1":25,"length2":24},{"diffs":[[0,"ght)"],[1," "],[0,"{\n    "],[-1," "],[0,"if"],[-1,"("],[0," "],[1,"("],[0,"totL"]],"start1":1992,"start2":1992,"length1":19,"length2":19},{"diffs":[[0,"ndefined) {\n"],[-1,"  "],[0,"        totL"]],"start1":2027,"start2":2027,"length1":26,"length2":24},{"diffs":[[0,"Weight;\n"],[-1," "],[0,"    }\n  "]],"start1":2091,"start2":2091,"length1":17,"length2":16},{"diffs":[[0,";\n    }\n    "],[-1," "],[0,"tree.relatWe"]],"start1":2097,"start2":2097,"length1":25,"length2":24},{"diffs":[[0,"    "],[-1," "],[0,"for"],[-1,"("],[0," "],[1,"("],[0,"var "]],"start1":2207,"start2":2207,"length1":14,"length2":13},{"diffs":[[0,"th; i++)"],[1," "],[0,"{\n"],[-1,"  "],[0,"        "]],"start1":2251,"start2":2251,"length1":20,"length2":19},{"diffs":[[0,"eWeight("],[-1," "],[0,"tree.chi"]],"start1":2280,"start2":2280,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1," }\n"],[1,"}"],[0,"\n}\n"],[-1,"\n"]],"start1":2330,"start2":2330,"length1":11,"length2":8}]],"length":2338,"saved":false}
{"ts":1355614562343,"patch":[[{"diffs":[[0,"', ["],[-1,"'todoApp.services'"],[0,"]).\n"]],"start1":70,"start2":70,"length1":26,"length2":8}]],"length":2320,"saved":false}
{"ts":1355614743371,"patch":[[{"diffs":[[0,"n($scope"],[1,", Item"],[0,") {\n    "]],"start1":104,"start2":104,"length1":16,"length2":22}]],"length":2326,"saved":false}
{"ts":1355614789964,"patch":[[{"diffs":[[0,"*/\n\n"],[-1,"angular.module( 'todoApp.controllers', []).\n"],[1,"todoApp."],[0,"cont"]],"start1":30,"start2":30,"length1":52,"length2":16}]],"length":2290,"saved":false}
{"ts":1355673850315,"patch":[[{"diffs":[[0,"pe, "],[-1,"Item"],[1,"Tree"],[0,") {\n"]],"start1":74,"start2":74,"length1":12,"length2":12}]],"length":2290,"saved":false}
{"contributors":[],"silentsave":false,"ts":1355776368501,"patch":[[{"diffs":[[0,"*/\n\n"],[-1,"todoApp"],[1,"angular.module( 'todoApp.treeController', ['todoApp.treeServices'])\n"],[0,".con"]],"start1":30,"start2":30,"length1":15,"length2":76}]],"length":2351,"saved":false}
{"ts":1355776534784,"patch":[[{"diffs":[[0,"ion Tree\");\n"],[1,"    \n"],[0,"    Tree.get"]],"start1":174,"start2":174,"length1":24,"length2":29}]],"length":2356,"saved":false}
{"ts":1355777626026,"patch":[[{"diffs":[[0,"cope"],[-1,", Tree"],[0,") {\n"]],"start1":133,"start2":133,"length1":14,"length2":8}]],"length":2350,"saved":false}
{"ts":1355777662371,"patch":[[{"diffs":[[0,"n($scope"],[1,", Tree"],[0,") {\n    "]],"start1":129,"start2":129,"length1":16,"length2":22}]],"length":2356,"saved":false}
{"ts":1355780188227,"patch":[[{"diffs":[[0,"ers */\n\n"],[1,"//"],[0,"angular."]],"start1":26,"start2":26,"length1":16,"length2":18},{"diffs":[[0,"ices'])\n"],[1,"todoApp"],[0,".control"]],"start1":96,"start2":96,"length1":16,"length2":23}]],"length":2365,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356712638350,"patch":[[{"diffs":[[0,"ope.tree"],[1,"Data"],[0," = data;"]],"start1":401,"start2":401,"length1":16,"length2":20}]],"length":2369,"saved":false}
{"ts":1356715425417,"patch":[[{"diffs":[[0,"eData = "],[1,"["],[0,"data"],[1,"]"],[0,";\n      "]],"start1":408,"start2":408,"length1":20,"length2":22}]],"length":2371,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356732092282,"patch":[[{"diffs":[[0,"*/\n\n"],[-1,"//angular.module( 'todoApp.treeController', ['todoApp.treeServices'])\n"],[0,"todo"]],"start1":30,"start2":30,"length1":78,"length2":8}]],"length":2301,"saved":false}
{"ts":1356735212347,"patch":[[{"diffs":[[0,");\n    \n"],[1,"    $scope.treeData = [];\n"],[0,"    Tree"]],"start1":122,"start2":122,"length1":16,"length2":42}]],"length":2327,"saved":false}
{"ts":1356735331623,"patch":[[{"diffs":[[0,"Data"],[-1," = ["],[1,".push( "],[0,"data"],[-1,"]"],[1,")"],[0,";\n  "]],"start1":365,"start2":365,"length1":17,"length2":20}]],"length":2330,"saved":false}
{"ts":1356785823576,"patch":[[{"diffs":[[0,"eData = "],[-1,"[]"],[1,"{}"],[0,";\n    Tr"]],"start1":144,"start2":144,"length1":18,"length2":18},{"diffs":[[0,"Data"],[-1,".push("],[1," ="],[0," data"],[-1,")"],[0,";\n  "]],"start1":365,"start2":365,"length1":20,"length2":15}]],"length":2325,"saved":false}
{"ts":1356788924536,"patch":[[{"diffs":[[0,"ope.tree"],[1,"Data"],[0," = {\n   "]],"start1":588,"start2":588,"length1":16,"length2":20}]],"length":2329,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356873778721,"patch":[[{"diffs":[[0,"g(\"call "],[-1,"function"],[1,"controller"],[0," Tree\");"]],"start1":100,"start2":100,"length1":24,"length2":26},{"diffs":[[0,"    \n    $scope."],[-1,"tree"],[1,"map"],[0,"Data = {};\n    T"]],"start1":127,"start2":127,"length1":36,"length2":35},{"diffs":[[0,"{};\n    "],[-1,"Tree"],[1,"maps"],[0,".get"],[1,"Map"],[0,"({},\n\n  "]],"start1":153,"start2":153,"length1":24,"length2":27},{"diffs":[[0,"     $scope."],[-1,"tree"],[1,"map"],[0,"Data = data;"]],"start1":353,"start2":353,"length1":28,"length2":27},{"diffs":[[0," $scope."],[-1,"tree"],[1,"map"],[0,"Data = {"]],"start1":587,"start2":587,"length1":20,"length2":19}]],"length":2331,"saved":false}
{"contributors":[],"silentsave":false,"ts":1356963412256,"patch":[[{"diffs":[[0,"roller('"],[-1,"Tree"],[1,"MapCtrl"],[0,"', funct"]],"start1":46,"start2":46,"length1":20,"length2":23},{"diffs":[[0,"$scope, "],[-1,"Tree"],[1,"maps"],[0,") {\n    "]],"start1":73,"start2":73,"length1":20,"length2":20},{"diffs":[[0,"troller "],[-1,"Tree"],[1,"Map"],[0,"\");\n    "]],"start1":114,"start2":114,"length1":20,"length2":19},{"diffs":[[0,"getMap({"],[1,"id: \"50e0cd2907de06fa72000001\""],[0,"},\n\n    "]],"start1":168,"start2":168,"length1":16,"length2":46},{"diffs":[[0,"all api "],[-1,"Tree"],[1,"maps"],[0,".get"],[1,"Map"],[0," succeed"]],"start1":264,"start2":264,"length1":24,"length2":27},{"diffs":[[0,"ole.log(\"$scope."],[-1,"tree"],[1,"mapData"],[0,": \" + JSON.strin"]],"start1":431,"start2":431,"length1":36,"length2":39},{"diffs":[[0,"api "],[-1,"Tree"],[1,"maps"],[0,".get"],[1,"Map"],[0," fai"]],"start1":557,"start2":557,"length1":16,"length2":19},{"diffs":[[0,"\"$scope."],[-1,"tree"],[1,"mapData"],[0,": \" + JS"]],"start1":734,"start2":734,"length1":20,"length2":23}]],"length":2375,"saved":false}
